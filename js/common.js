document.addEventListener('DOMContentLoaded',function(){const t=document.querySelector('.nav-toggle'),e=document.querySelector('.nav-menu');t&&e&&(t.addEventListener('click',function(){e.classList.toggle('active'),gtag('event',e.classList.contains('active')?'mobile_menu_open':'mobile_menu_close',{event_category:'Navigation',event_label:'Menu_Toggle'})}),document.querySelectorAll('.nav-menu a').forEach(t=>{t.addEventListener('click',function(){const n=this.textContent.trim(),o=this.getAttribute('href');gtag('event','navigation_click',{event_category:'Navigation',event_label:n,link_url:o}),window.innerWidth<=768&&e.classList.remove('active')})}),document.addEventListener('click',function(n){t.contains(n.target)||e.contains(n.target)||e.classList.remove('active')}));const n=window.location.pathname;document.querySelectorAll('.nav-menu a').forEach(t=>{const e=new URL(t.href).pathname;n!==e&&('/'!==n||'/index.html'!==e)||(t.classList.add('active'))}),document.querySelectorAll('a[href^="#"]').forEach(t=>{t.addEventListener('click',function(t){t.preventDefault();const e=document.querySelector(this.getAttribute('href'));if(e){const t=this.getAttribute('href').substring(1);gtag('event','anchor_scroll',{event_category:'Navigation',event_label:t,action:'smooth_scroll'}),e.scrollIntoView({behavior:'smooth',block:'start'})}})});const o=document.querySelectorAll('.fade-in'),c={threshold:.1,rootMargin:'0px 0px -50px 0px'},i=new IntersectionObserver(function(t,e){t.forEach(t=>{t.isIntersecting&&(t.target.style.opacity='1',t.target.style.transform='translateY(0)')})},c);o.forEach(t=>{t.style.opacity='0',t.style.transform='translateY(20px)',t.style.transition='opacity 0.6s ease-out, transform 0.6s ease-out',i.observe(t)}),document.querySelectorAll('.breadcrumb a').forEach(t=>{t.addEventListener('click',function(){const t=this.textContent.trim();gtag('event','breadcrumb_click',{event_category:'Navigation',event_label:t,action:'breadcrumb_navigation'})})})}),'serviceWorker'in navigator&&window.addEventListener('load',()=>{navigator.serviceWorker.register('/sw.js').then(t=>{console.log('âœ… Service Worker è¨»å†ŠæˆåŠŸ:',t.scope),t.addEventListener('updatefound',()=>{const e=t.installing;console.log('ðŸ”„ ç™¼ç¾ Service Worker æ›´æ–°'),e.addEventListener('statechange',()=>{'installed'===e.state&&navigator.serviceWorker.controller&&console.log('ðŸ“¢ æ–°ç‰ˆæœ¬å¯ç”¨,è«‹é‡æ–°æ•´ç†é é¢')})})}).catch(t=>{console.error('âŒ Service Worker è¨»å†Šå¤±æ•—:',t)})});function scrollToTop(){gtag('event','scroll_to_top',{event_category:'User_Action',event_label:'Back_To_Top',scroll_position:window.pageYOffset}),window.scrollTo({top:0,behavior:'smooth'})}window.addEventListener('scroll',function(){const t=document.querySelector('.back-to-top');t&&(window.pageYOffset>300?t.style.display='block':t.style.display='none')});let scrollDepthTracked={'25':!1,'50':!1,'75':!1,'100':!1};window.addEventListener('scroll',function(){const t=Math.round((window.scrollY+window.innerHeight)/document.body.scrollHeight*100);['25','50','75','100'].forEach(e=>{const n=parseInt(e);t>=n&&!scrollDepthTracked[e]&&(scrollDepthTracked[e]=!0,gtag('event','scroll_depth',{event_category:'Engagement',event_label:`${e}%`,page_path:window.location.pathname}))})});

